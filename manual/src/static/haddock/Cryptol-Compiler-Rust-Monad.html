<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Cryptol.Compiler.Rust.Monad</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">cryptol-compiler-0.1.0.0</span><ul class="links" id="page-menu"><li id="quick-jump-button"><a href="#">Quick Jump</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Cryptol.Compiler.Rust.Monad</p></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:GenInfo">GenInfo</a> = <a href="#v:GenInfo">GenInfo</a> {<ul class="subs"><li><a href="#v:genCurModule">genCurModule</a> :: <a href="file:///home/diatchki/src/cryptol/compiler/dist-newstyle/build/x86_64-linux/ghc-9.6.2/cryptol-3.0.0.99/doc/html/cryptol/Cryptol-Utils-Ident.html#t:ModName" title="Cryptol.Utils.Ident">ModName</a></li><li><a href="#v:genExternalModules">genExternalModules</a> :: <a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/containers-0.6.7/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> <a href="file:///home/diatchki/src/cryptol/compiler/dist-newstyle/build/x86_64-linux/ghc-9.6.2/cryptol-3.0.0.99/doc/html/cryptol/Cryptol-Utils-Ident.html#t:ModName" title="Cryptol.Utils.Ident">ModName</a> <a href="Cryptol-Compiler-Rust-Monad.html#t:ExtModule" title="Cryptol.Compiler.Rust.Monad">ExtModule</a></li></ul>}</li><li class="src short"><a href="#v:runRustM">runRustM</a> :: <a href="Cryptol-Compiler-Rust-Monad.html#t:GenInfo" title="Cryptol.Compiler.Rust.Monad">GenInfo</a> -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> a -&gt; <a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/System-IO.html#t:IO" title="System.IO">IO</a> a</li><li class="src short"><span class="keyword">data</span> <a href="#t:ExprContext">ExprContext</a><ul class="subs"><li>= <a href="#v:OwnContext">OwnContext</a></li><li>| <a href="#v:BorrowContext">BorrowContext</a></li><li>| <a href="#v:MutContext">MutContext</a></li></ul></li><li class="src short"><a href="#v:ownIfStream">ownIfStream</a> :: <a href="Cryptol-Compiler-IR-Cryptol.html#t:Type" title="Cryptol.Compiler.IR.Cryptol">Type</a> -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:ExprContext" title="Cryptol.Compiler.Rust.Monad">ExprContext</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:RustImpl">RustImpl</a> = WithBase <a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/System-IO.html#t:IO" title="System.IO">IO</a> [ReaderT <a href="Cryptol-Compiler-Rust-Monad.html#t:RO" title="Cryptol.Compiler.Rust.Monad">RO</a>, StateT <a href="Cryptol-Compiler-Rust-Monad.html#t:RW" title="Cryptol.Compiler.Rust.Monad">RW</a>]</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:Rust">Rust</a> a = <a href="#v:Rust">Rust</a> (<a href="Cryptol-Compiler-Rust-Monad.html#t:RustImpl" title="Cryptol.Compiler.Rust.Monad">RustImpl</a> a)</li><li class="src short"><a href="#v:doIO">doIO</a> :: <a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/System-IO.html#t:IO" title="System.IO">IO</a> a -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> a</li><li class="src short"><span class="keyword">data</span> <a href="#t:ExtModule">ExtModule</a> = <a href="#v:ExtModule">ExtModule</a> {<ul class="subs"><li><a href="#v:extModuleName">extModuleName</a> :: Ident</li><li><a href="#v:extModuleNames">extModuleNames</a> :: <a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/containers-0.6.7/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> <a href="Cryptol-Compiler-IR-Cryptol.html#t:FunName" title="Cryptol.Compiler.IR.Cryptol">FunName</a> Ident</li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:RO">RO</a> = <a href="#v:RO">RO</a> {<ul class="subs"><li><a href="#v:roModName">roModName</a> :: <a href="file:///home/diatchki/src/cryptol/compiler/dist-newstyle/build/x86_64-linux/ghc-9.6.2/cryptol-3.0.0.99/doc/html/cryptol/Cryptol-Utils-Ident.html#t:ModName" title="Cryptol.Utils.Ident">ModName</a></li><li><a href="#v:roExternalNames">roExternalNames</a> :: <a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/containers-0.6.7/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> <a href="file:///home/diatchki/src/cryptol/compiler/dist-newstyle/build/x86_64-linux/ghc-9.6.2/cryptol-3.0.0.99/doc/html/cryptol/Cryptol-Utils-Ident.html#t:ModName" title="Cryptol.Utils.Ident">ModName</a> <a href="Cryptol-Compiler-Rust-Monad.html#t:ExtModule" title="Cryptol.Compiler.Rust.Monad">ExtModule</a></li><li><a href="#v:roLoc">roLoc</a> :: <a href="Cryptol-Compiler-Error.html#t:Loc" title="Cryptol.Compiler.Error">Loc</a></li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:RW">RW</a> = <a href="#v:RW">RW</a> {<ul class="subs"><li><a href="#v:rwLocalFunNames">rwLocalFunNames</a> :: <a href="Cryptol-Compiler-Rust-NameMap.html#t:NameMap" title="Cryptol.Compiler.Rust.NameMap">NameMap</a> <a href="Cryptol-Compiler-IR-Cryptol.html#t:FunName" title="Cryptol.Compiler.IR.Cryptol">FunName</a></li><li><a href="#v:rwLocalNames">rwLocalNames</a> :: <a href="Cryptol-Compiler-Rust-Monad.html#t:LocalNames" title="Cryptol.Compiler.Rust.Monad">LocalNames</a></li></ul>}</li><li class="src short"><a href="#v:resetFunLocalNames">resetFunLocalNames</a> :: <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> ()</li><li class="src short"><a href="#v:bindLocal">bindLocal</a> :: (a -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:LocalNames" title="Cryptol.Compiler.Rust.Monad">LocalNames</a> -&gt; (Ident, <a href="Cryptol-Compiler-Rust-Monad.html#t:LocalNames" title="Cryptol.Compiler.Rust.Monad">LocalNames</a>)) -&gt; a -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> Ident</li><li class="src short"><a href="#v:bindLocalLet">bindLocalLet</a> :: <a href="Cryptol-Compiler-IR-Cryptol.html#t:NameId" title="Cryptol.Compiler.IR.Cryptol">NameId</a> -&gt; (Ident -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> a) -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> a</li><li class="src short"><a href="#v:removeLocalLet">removeLocalLet</a> :: <a href="Cryptol-Compiler-IR-Cryptol.html#t:NameId" title="Cryptol.Compiler.IR.Cryptol">NameId</a> -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> ()</li><li class="src short"><a href="#v:addTypeBound">addTypeBound</a> :: <a href="file:///home/diatchki/src/cryptol/compiler/dist-newstyle/build/x86_64-linux/ghc-9.6.2/cryptol-3.0.0.99/doc/html/cryptol/Cryptol-TypeCheck-Type.html#t:TParam" title="Cryptol.TypeCheck.Type">TParam</a> -&gt; <a href="Cryptol-Compiler-Rust-Utils.html#t:RustWherePredicate" title="Cryptol.Compiler.Rust.Utils">RustWherePredicate</a> -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> ()</li><li class="src short"><a href="#v:getTypeBounds">getTypeBounds</a> :: <a href="file:///home/diatchki/src/cryptol/compiler/dist-newstyle/build/x86_64-linux/ghc-9.6.2/cryptol-3.0.0.99/doc/html/cryptol/Cryptol-TypeCheck-Type.html#t:TParam" title="Cryptol.TypeCheck.Type">TParam</a> -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> [<a href="Cryptol-Compiler-Rust-Utils.html#t:RustWherePredicate" title="Cryptol.Compiler.Rust.Utils">RustWherePredicate</a>]</li><li class="src short"><a href="#v:withSameCont">withSameCont</a> :: [<a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> a] -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> [a]</li><li class="src short"><a href="#v:getUsed">getUsed</a> :: <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> (<a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/containers-0.6.7/Data-Set.html#t:Set" title="Data.Set">Set</a> Ident)</li><li class="src short"><a href="#v:setUsed">setUsed</a> :: <a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/containers-0.6.7/Data-Set.html#t:Set" title="Data.Set">Set</a> Ident -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> ()</li><li class="src short"><a href="#v:inStreamClosure">inStreamClosure</a> :: <a href="Cryptol-Compiler-Rust-Monad.html#t:ExprContext" title="Cryptol.Compiler.Rust.Monad">ExprContext</a> -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> a -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> ([(Ident, <a href="file:///home/diatchki/src/cryptol/compiler/dist-newstyle/build/x86_64-linux/ghc-9.6.2/cryptol-3.0.0.99/doc/html/cryptol/Cryptol-TypeCheck-Type.html#t:TParam" title="Cryptol.TypeCheck.Type">TParam</a>)], [(Ident, <a href="Cryptol-Compiler-IR-Common.html#t:SizeVarSize" title="Cryptol.Compiler.IR.Common">SizeVarSize</a>)], a)</li><li class="src short"><a href="#v:isInStreamClosure">isInStreamClosure</a> :: <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> (<a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Cryptol-Compiler-Rust-Monad.html#t:StreamClosureInfo" title="Cryptol.Compiler.Rust.Monad">StreamClosureInfo</a>)</li><li class="src short"><a href="#v:mapStreamClosure">mapStreamClosure</a> :: (<a href="Cryptol-Compiler-Rust-Monad.html#t:StreamClosureInfo" title="Cryptol.Compiler.Rust.Monad">StreamClosureInfo</a> -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:StreamClosureInfo" title="Cryptol.Compiler.Rust.Monad">StreamClosureInfo</a>) -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> <a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:bindFun">bindFun</a> :: <a href="Cryptol-Compiler-IR-Cryptol.html#t:FunName" title="Cryptol.Compiler.IR.Cryptol">FunName</a> -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> Ident</li><li class="src short"><a href="#v:getTParams">getTParams</a> :: <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> (<a href="file:///home/diatchki/src/cryptol/compiler/dist-newstyle/build/x86_64-linux/ghc-9.6.2/cryptol-3.0.0.99/doc/html/cryptol/Cryptol-TypeCheck-Type.html#t:TParam" title="Cryptol.TypeCheck.Type">TParam</a> -&gt; <a href="Cryptol-Compiler-Rust-Utils.html#t:RustType" title="Cryptol.Compiler.Rust.Utils">RustType</a>)</li><li class="src short"><a href="#v:lookupTParam">lookupTParam</a> :: <a href="file:///home/diatchki/src/cryptol/compiler/dist-newstyle/build/x86_64-linux/ghc-9.6.2/cryptol-3.0.0.99/doc/html/cryptol/Cryptol-TypeCheck-Type.html#t:TParam" title="Cryptol.TypeCheck.Type">TParam</a> -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> Ident</li><li class="src short"><a href="#v:lookupSizeParam">lookupSizeParam</a> :: <a href="Cryptol-Compiler-IR-Cryptol.html#t:SizeName" title="Cryptol.Compiler.IR.Cryptol">SizeName</a> -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> <a href="Cryptol-Compiler-Rust-Utils.html#t:RustExpr" title="Cryptol.Compiler.Rust.Utils">RustExpr</a></li><li class="src short"><a href="#v:lookupNameId">lookupNameId</a> :: <a href="Cryptol-Compiler-IR-Cryptol.html#t:NameId" title="Cryptol.Compiler.IR.Cryptol">NameId</a> -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> (<a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>, <a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>, <a href="Cryptol-Compiler-Rust-Utils.html#t:RustExpr" title="Cryptol.Compiler.Rust.Utils">RustExpr</a>)</li><li class="src short"><a href="#v:lookupNameRustIdent">lookupNameRustIdent</a> :: <a href="Cryptol-Compiler-IR-Cryptol.html#t:NameId" title="Cryptol.Compiler.IR.Cryptol">NameId</a> -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> Ident</li><li class="src short"><a href="#v:lookupLenParam">lookupLenParam</a> :: <a href="file:///home/diatchki/src/cryptol/compiler/dist-newstyle/build/x86_64-linux/ghc-9.6.2/cryptol-3.0.0.99/doc/html/cryptol/Cryptol-TypeCheck-Type.html#t:TParam" title="Cryptol.TypeCheck.Type">TParam</a> -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> <a href="Cryptol-Compiler-Rust-Utils.html#t:RustExpr" title="Cryptol.Compiler.Rust.Utils">RustExpr</a></li><li class="src short"><a href="#v:isFunNameLocal">isFunNameLocal</a> :: <a href="Cryptol-Compiler-IR-Cryptol.html#t:FunName" title="Cryptol.Compiler.IR.Cryptol">FunName</a> -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> <a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:lookupFunName">lookupFunName</a> :: <a href="Cryptol-Compiler-IR-Cryptol.html#t:FunName" title="Cryptol.Compiler.IR.Cryptol">FunName</a> -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> (<a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="Cryptol-Compiler-IR-Prims.html#t:IRPrim" title="Cryptol.Compiler.IR.Prims">IRPrim</a> <a href="Cryptol-Compiler-Rust-Utils.html#t:RustPath" title="Cryptol.Compiler.Rust.Utils">RustPath</a>)</li><li class="src short"><a href="#v:localScope">localScope</a> :: <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> a -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> a</li><li class="src short"><a href="#v:getFunNames">getFunNames</a> :: <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> (<a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/containers-0.6.7/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> <a href="Cryptol-Compiler-IR-Cryptol.html#t:FunName" title="Cryptol.Compiler.IR.Cryptol">FunName</a> Ident)</li><li class="src short"><span class="keyword">data</span> <a href="#t:LocalNames">LocalNames</a> = <a href="#v:LocalNames">LocalNames</a> {<ul class="subs"><li><a href="#v:lTypeNames">lTypeNames</a> :: <a href="Cryptol-Compiler-Rust-NameMap.html#t:NameMap" title="Cryptol.Compiler.Rust.NameMap">NameMap</a> <a href="file:///home/diatchki/src/cryptol/compiler/dist-newstyle/build/x86_64-linux/ghc-9.6.2/cryptol-3.0.0.99/doc/html/cryptol/Cryptol-TypeCheck-Type.html#t:TParam" title="Cryptol.TypeCheck.Type">TParam</a></li><li><a href="#v:lTypeBounds">lTypeBounds</a> :: <a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/containers-0.6.7/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> <a href="file:///home/diatchki/src/cryptol/compiler/dist-newstyle/build/x86_64-linux/ghc-9.6.2/cryptol-3.0.0.99/doc/html/cryptol/Cryptol-TypeCheck-Type.html#t:TParam" title="Cryptol.TypeCheck.Type">TParam</a> [<a href="Cryptol-Compiler-Rust-Utils.html#t:RustWherePredicate" title="Cryptol.Compiler.Rust.Utils">RustWherePredicate</a>]</li><li><a href="#v:lValNames">lValNames</a> :: <a href="Cryptol-Compiler-Rust-NameMap.html#t:NameMap" title="Cryptol.Compiler.Rust.NameMap">NameMap</a> <a href="Cryptol-Compiler-IR-Cryptol.html#t:NameId" title="Cryptol.Compiler.IR.Cryptol">NameId</a></li><li><a href="#v:lLenParams">lLenParams</a> :: <a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/containers-0.6.7/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> <a href="file:///home/diatchki/src/cryptol/compiler/dist-newstyle/build/x86_64-linux/ghc-9.6.2/cryptol-3.0.0.99/doc/html/cryptol/Cryptol-TypeCheck-Type.html#t:TParam" title="Cryptol.TypeCheck.Type">TParam</a> Ident</li><li><a href="#v:lSizeParams">lSizeParams</a> :: <a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/containers-0.6.7/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> <a href="file:///home/diatchki/src/cryptol/compiler/dist-newstyle/build/x86_64-linux/ghc-9.6.2/cryptol-3.0.0.99/doc/html/cryptol/Cryptol-TypeCheck-Type.html#t:TParam" title="Cryptol.TypeCheck.Type">TParam</a> Ident</li><li><a href="#v:lLocalVars">lLocalVars</a> :: <a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/containers-0.6.7/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> Ident <a href="Cryptol-Compiler-Rust-Monad.html#t:LocVarLocation" title="Cryptol.Compiler.Rust.Monad">LocVarLocation</a></li><li><a href="#v:lUsedVars">lUsedVars</a> :: <a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/containers-0.6.7/Data-Set.html#t:Set" title="Data.Set">Set</a> Ident</li><li><a href="#v:lInStreamClosure">lInStreamClosure</a> :: !(<a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Cryptol-Compiler-Rust-Monad.html#t:StreamClosureInfo" title="Cryptol.Compiler.Rust.Monad">StreamClosureInfo</a>)</li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:StreamClosureInfo">StreamClosureInfo</a> = <a href="#v:StreamClosureInfo">StreamClosureInfo</a> {<ul class="subs"><li><a href="#v:cloLenIdents">cloLenIdents</a> :: <a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/containers-0.6.7/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> Ident <a href="file:///home/diatchki/src/cryptol/compiler/dist-newstyle/build/x86_64-linux/ghc-9.6.2/cryptol-3.0.0.99/doc/html/cryptol/Cryptol-TypeCheck-Type.html#t:TParam" title="Cryptol.TypeCheck.Type">TParam</a></li><li><a href="#v:cloSizeIdents">cloSizeIdents</a> :: <a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/containers-0.6.7/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> Ident <a href="Cryptol-Compiler-IR-Common.html#t:SizeVarSize" title="Cryptol.Compiler.IR.Common">SizeVarSize</a></li><li><a href="#v:cloContext">cloContext</a> :: <a href="Cryptol-Compiler-Rust-Monad.html#t:ExprContext" title="Cryptol.Compiler.Rust.Monad">ExprContext</a></li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:LocVarLocation">LocVarLocation</a><ul class="subs"><li>= <a href="#v:KnownLocal">KnownLocal</a></li><li>| <a href="#v:LocalOrClosure">LocalOrClosure</a></li></ul></li><li class="src short"><a href="#v:emptyLocalNames">emptyLocalNames</a> :: <a href="Cryptol-Compiler-Rust-Monad.html#t:LocalNames" title="Cryptol.Compiler.Rust.Monad">LocalNames</a></li><li class="src short"><a href="#v:addLocalType">addLocalType</a> :: <a href="file:///home/diatchki/src/cryptol/compiler/dist-newstyle/build/x86_64-linux/ghc-9.6.2/cryptol-3.0.0.99/doc/html/cryptol/Cryptol-TypeCheck-Type.html#t:TParam" title="Cryptol.TypeCheck.Type">TParam</a> -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:LocalNames" title="Cryptol.Compiler.Rust.Monad">LocalNames</a> -&gt; (Ident, <a href="Cryptol-Compiler-Rust-Monad.html#t:LocalNames" title="Cryptol.Compiler.Rust.Monad">LocalNames</a>)</li><li class="src short"><a href="#v:addLocalVar">addLocalVar</a> :: <a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Cryptol-Compiler-Rust-Monad.html#t:LocVarLocation" title="Cryptol.Compiler.Rust.Monad">LocVarLocation</a> -&gt; <a href="Cryptol-Compiler-IR-Cryptol.html#t:NameId" title="Cryptol.Compiler.IR.Cryptol">NameId</a> -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:LocalNames" title="Cryptol.Compiler.Rust.Monad">LocalNames</a> -&gt; (Ident, <a href="Cryptol-Compiler-Rust-Monad.html#t:LocalNames" title="Cryptol.Compiler.Rust.Monad">LocalNames</a>)</li><li class="src short"><a href="#v:removeLocalVar">removeLocalVar</a> :: <a href="Cryptol-Compiler-IR-Cryptol.html#t:NameId" title="Cryptol.Compiler.IR.Cryptol">NameId</a> -&gt; Ident -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:LocalNames" title="Cryptol.Compiler.Rust.Monad">LocalNames</a> -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:LocalNames" title="Cryptol.Compiler.Rust.Monad">LocalNames</a></li><li class="src short"><a href="#v:addLocalLenghtParam">addLocalLenghtParam</a> :: <a href="file:///home/diatchki/src/cryptol/compiler/dist-newstyle/build/x86_64-linux/ghc-9.6.2/cryptol-3.0.0.99/doc/html/cryptol/Cryptol-TypeCheck-Type.html#t:TParam" title="Cryptol.TypeCheck.Type">TParam</a> -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:LocalNames" title="Cryptol.Compiler.Rust.Monad">LocalNames</a> -&gt; (Ident, <a href="Cryptol-Compiler-Rust-Monad.html#t:LocalNames" title="Cryptol.Compiler.Rust.Monad">LocalNames</a>)</li><li class="src short"><a href="#v:addLocalSizeParam">addLocalSizeParam</a> :: <a href="file:///home/diatchki/src/cryptol/compiler/dist-newstyle/build/x86_64-linux/ghc-9.6.2/cryptol-3.0.0.99/doc/html/cryptol/Cryptol-TypeCheck-Type.html#t:TParam" title="Cryptol.TypeCheck.Type">TParam</a> -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:LocalNames" title="Cryptol.Compiler.Rust.Monad">LocalNames</a> -&gt; (Ident, <a href="Cryptol-Compiler-Rust-Monad.html#t:LocalNames" title="Cryptol.Compiler.Rust.Monad">LocalNames</a>)</li><li class="src short"><a href="#v:enter">enter</a> :: <a href="Cryptol-Compiler-PP.html#t:Doc" title="Cryptol.Compiler.PP">Doc</a> -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> a -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> a</li><li class="src short"><a href="#v:unsupported">unsupported</a> :: <a href="Cryptol-Compiler-PP.html#t:Doc" title="Cryptol.Compiler.PP">Doc</a> -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> a</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:GenInfo" class="def">GenInfo</a> <a href="#t:GenInfo" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:GenInfo" class="def">GenInfo</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:genCurModule" class="def">genCurModule</a> :: <a href="file:///home/diatchki/src/cryptol/compiler/dist-newstyle/build/x86_64-linux/ghc-9.6.2/cryptol-3.0.0.99/doc/html/cryptol/Cryptol-Utils-Ident.html#t:ModName" title="Cryptol.Utils.Ident">ModName</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:genExternalModules" class="def">genExternalModules</a> :: <a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/containers-0.6.7/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> <a href="file:///home/diatchki/src/cryptol/compiler/dist-newstyle/build/x86_64-linux/ghc-9.6.2/cryptol-3.0.0.99/doc/html/cryptol/Cryptol-Utils-Ident.html#t:ModName" title="Cryptol.Utils.Ident">ModName</a> <a href="Cryptol-Compiler-Rust-Monad.html#t:ExtModule" title="Cryptol.Compiler.Rust.Monad">ExtModule</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:runRustM" class="def">runRustM</a> :: <a href="Cryptol-Compiler-Rust-Monad.html#t:GenInfo" title="Cryptol.Compiler.Rust.Monad">GenInfo</a> -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> a -&gt; <a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/System-IO.html#t:IO" title="System.IO">IO</a> a <a href="#v:runRustM" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ExprContext" class="def">ExprContext</a> <a href="#t:ExprContext" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:OwnContext" class="def">OwnContext</a></td><td class="doc"><p>We are generating an ownded expression</p></td></tr><tr><td class="src"><a id="v:BorrowContext" class="def">BorrowContext</a></td><td class="doc"><p>We are generating a borrowed expression</p></td></tr><tr><td class="src"><a id="v:MutContext" class="def">MutContext</a></td><td class="doc"><p>At the moment, this is only used for Head, and
 is extremely special cased</p></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:ExprContext">Instances</h4><details id="i:ExprContext" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ExprContext:Eq:1"></span> <a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> <a href="Cryptol-Compiler-Rust-Monad.html#t:ExprContext" title="Cryptol.Compiler.Rust.Monad">ExprContext</a></span> <a href="#t:ExprContext" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ExprContext:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cryptol-Compiler-Rust-Monad.html">Cryptol.Compiler.Rust.Monad</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Cryptol-Compiler-Rust-Monad.html#t:ExprContext" title="Cryptol.Compiler.Rust.Monad">ExprContext</a> -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:ExprContext" title="Cryptol.Compiler.Rust.Monad">ExprContext</a> -&gt; <a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Cryptol-Compiler-Rust-Monad.html#t:ExprContext" title="Cryptol.Compiler.Rust.Monad">ExprContext</a> -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:ExprContext" title="Cryptol.Compiler.Rust.Monad">ExprContext</a> -&gt; <a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:ownIfStream" class="def">ownIfStream</a> :: <a href="Cryptol-Compiler-IR-Cryptol.html#t:Type" title="Cryptol.Compiler.IR.Cryptol">Type</a> -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:ExprContext" title="Cryptol.Compiler.Rust.Monad">ExprContext</a> <a href="#v:ownIfStream" class="selflink">#</a></p><div class="doc"><p>Use Own for streams and functions, and Borrow otherwise</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:RustImpl" class="def">RustImpl</a> = WithBase <a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/System-IO.html#t:IO" title="System.IO">IO</a> [ReaderT <a href="Cryptol-Compiler-Rust-Monad.html#t:RO" title="Cryptol.Compiler.Rust.Monad">RO</a>, StateT <a href="Cryptol-Compiler-Rust-Monad.html#t:RW" title="Cryptol.Compiler.Rust.Monad">RW</a>] <a href="#t:RustImpl" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:Rust" class="def">Rust</a> a <a href="#t:Rust" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Rust" class="def">Rust</a> (<a href="Cryptol-Compiler-Rust-Monad.html#t:RustImpl" title="Cryptol.Compiler.Rust.Monad">RustImpl</a> a)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Rust">Instances</h4><details id="i:Rust" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Rust:Applicative:1"></span> <a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a></span> <a href="#t:Rust" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Rust:Applicative:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cryptol-Compiler-Rust-Monad.html">Cryptol.Compiler.Rust.Monad</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:pure">pure</a> :: a -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> a <a href="#v:pure" class="selflink">#</a></p><p class="src"><a href="#v:-60--42--62-">(&lt;*&gt;)</a> :: <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> (a -&gt; b) -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> a -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> b <a href="#v:-60--42--62-" class="selflink">#</a></p><p class="src"><a href="#v:liftA2">liftA2</a> :: (a -&gt; b -&gt; c) -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> a -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> b -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> c <a href="#v:liftA2" class="selflink">#</a></p><p class="src"><a href="#v:-42--62-">(*&gt;)</a> :: <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> a -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> b -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> b <a href="#v:-42--62-" class="selflink">#</a></p><p class="src"><a href="#v:-60--42-">(&lt;*)</a> :: <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> a -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> b -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> a <a href="#v:-60--42-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Rust:Functor:2"></span> <a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a></span> <a href="#t:Rust" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Rust:Functor:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cryptol-Compiler-Rust-Monad.html">Cryptol.Compiler.Rust.Monad</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fmap">fmap</a> :: (a -&gt; b) -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> a -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> b <a href="#v:fmap" class="selflink">#</a></p><p class="src"><a href="#v:-60--36-">(&lt;$)</a> :: a -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> b -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> a <a href="#v:-60--36-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Rust:Monad:3"></span> <a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a></span> <a href="#t:Rust" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Rust:Monad:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cryptol-Compiler-Rust-Monad.html">Cryptol.Compiler.Rust.Monad</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-62--62--61-">(&gt;&gt;=)</a> :: <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> a -&gt; (a -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> b) -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> b <a href="#v:-62--62--61-" class="selflink">#</a></p><p class="src"><a href="#v:-62--62-">(&gt;&gt;)</a> :: <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> a -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> b -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> b <a href="#v:-62--62-" class="selflink">#</a></p><p class="src"><a href="#v:return">return</a> :: a -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> a <a href="#v:return" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:doIO" class="def">doIO</a> :: <a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/System-IO.html#t:IO" title="System.IO">IO</a> a -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> a <a href="#v:doIO" class="selflink">#</a></p><div class="doc"><p>Run an IO computation in the Rust monad</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ExtModule" class="def">ExtModule</a> <a href="#t:ExtModule" class="selflink">#</a></p><div class="doc"><p>Information about previously compiled modules.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ExtModule" class="def">ExtModule</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:extModuleName" class="def">extModuleName</a> :: Ident</dfn><div class="doc"><p>Name of module</p></div></li><li><dfn class="src"><a id="v:extModuleNames" class="def">extModuleNames</a> :: <a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/containers-0.6.7/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> <a href="Cryptol-Compiler-IR-Cryptol.html#t:FunName" title="Cryptol.Compiler.IR.Cryptol">FunName</a> Ident</dfn><div class="doc"><p>Functions defined in the module</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:RO" class="def">RO</a> <a href="#t:RO" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:RO" class="def">RO</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:roModName" class="def">roModName</a> :: <a href="file:///home/diatchki/src/cryptol/compiler/dist-newstyle/build/x86_64-linux/ghc-9.6.2/cryptol-3.0.0.99/doc/html/cryptol/Cryptol-Utils-Ident.html#t:ModName" title="Cryptol.Utils.Ident">ModName</a></dfn><div class="doc"><p>The current module we are working on</p></div></li><li><dfn class="src"><a id="v:roExternalNames" class="def">roExternalNames</a> :: <a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/containers-0.6.7/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> <a href="file:///home/diatchki/src/cryptol/compiler/dist-newstyle/build/x86_64-linux/ghc-9.6.2/cryptol-3.0.0.99/doc/html/cryptol/Cryptol-Utils-Ident.html#t:ModName" title="Cryptol.Utils.Ident">ModName</a> <a href="Cryptol-Compiler-Rust-Monad.html#t:ExtModule" title="Cryptol.Compiler.Rust.Monad">ExtModule</a></dfn><div class="doc"><p>Names defined in different modules. Read only.</p></div></li><li><dfn class="src"><a id="v:roLoc" class="def">roLoc</a> :: <a href="Cryptol-Compiler-Error.html#t:Loc" title="Cryptol.Compiler.Error">Loc</a></dfn><div class="doc"><p>Location, for error reporting</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:RW" class="def">RW</a> <a href="#t:RW" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:RW" class="def">RW</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:rwLocalFunNames" class="def">rwLocalFunNames</a> :: <a href="Cryptol-Compiler-Rust-NameMap.html#t:NameMap" title="Cryptol.Compiler.Rust.NameMap">NameMap</a> <a href="Cryptol-Compiler-IR-Cryptol.html#t:FunName" title="Cryptol.Compiler.IR.Cryptol">FunName</a></dfn><div class="doc"><p>Names in the current module</p></div></li><li><dfn class="src"><a id="v:rwLocalNames" class="def">rwLocalNames</a> :: <a href="Cryptol-Compiler-Rust-Monad.html#t:LocalNames" title="Cryptol.Compiler.Rust.Monad">LocalNames</a></dfn><div class="doc"><p>Names in the current function</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:resetFunLocalNames" class="def">resetFunLocalNames</a> :: <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> () <a href="#v:resetFunLocalNames" class="selflink">#</a></p><div class="doc"><p>Reset names local to a function.</p></div></div><div class="top"><p class="src"><a id="v:bindLocal" class="def">bindLocal</a> <a href="#v:bindLocal" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (a -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:LocalNames" title="Cryptol.Compiler.Rust.Monad">LocalNames</a> -&gt; (Ident, <a href="Cryptol-Compiler-Rust-Monad.html#t:LocalNames" title="Cryptol.Compiler.Rust.Monad">LocalNames</a>))</td><td class="doc"><p>How to bind it </p></td></tr><tr><td class="src">-&gt; a</td><td class="doc"><p>Name of the local thing </p></td></tr><tr><td class="src">-&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> Ident</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Bind a local names</p></div></div><div class="top"><p class="src"><a id="v:bindLocalLet" class="def">bindLocalLet</a> :: <a href="Cryptol-Compiler-IR-Cryptol.html#t:NameId" title="Cryptol.Compiler.IR.Cryptol">NameId</a> -&gt; (Ident -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> a) -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> a <a href="#v:bindLocalLet" class="selflink">#</a></p><div class="doc"><p>Bind a local for the duraiton of the given computation</p></div></div><div class="top"><p class="src"><a id="v:removeLocalLet" class="def">removeLocalLet</a> :: <a href="Cryptol-Compiler-IR-Cryptol.html#t:NameId" title="Cryptol.Compiler.IR.Cryptol">NameId</a> -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> () <a href="#v:removeLocalLet" class="selflink">#</a></p><div class="doc"><p>In some cases, instead of using <code><a href="Cryptol-Compiler-Rust-Monad.html#v:bindLocalLet" title="Cryptol.Compiler.Rust.Monad">bindLocalLet</a></code> it is more convenient
 to first add some locals and them remove them.  This avoids having
 to nest stuff.</p></div></div><div class="top"><p class="src"><a id="v:addTypeBound" class="def">addTypeBound</a> :: <a href="file:///home/diatchki/src/cryptol/compiler/dist-newstyle/build/x86_64-linux/ghc-9.6.2/cryptol-3.0.0.99/doc/html/cryptol/Cryptol-TypeCheck-Type.html#t:TParam" title="Cryptol.TypeCheck.Type">TParam</a> -&gt; <a href="Cryptol-Compiler-Rust-Utils.html#t:RustWherePredicate" title="Cryptol.Compiler.Rust.Utils">RustWherePredicate</a> -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> () <a href="#v:addTypeBound" class="selflink">#</a></p><div class="doc"><p>Add a type bound for a parameter.</p></div></div><div class="top"><p class="src"><a id="v:getTypeBounds" class="def">getTypeBounds</a> :: <a href="file:///home/diatchki/src/cryptol/compiler/dist-newstyle/build/x86_64-linux/ghc-9.6.2/cryptol-3.0.0.99/doc/html/cryptol/Cryptol-TypeCheck-Type.html#t:TParam" title="Cryptol.TypeCheck.Type">TParam</a> -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> [<a href="Cryptol-Compiler-Rust-Utils.html#t:RustWherePredicate" title="Cryptol.Compiler.Rust.Utils">RustWherePredicate</a>] <a href="#v:getTypeBounds" class="selflink">#</a></p><div class="doc"><p>Get the type bounds for this parameter.</p></div></div><div class="top"><p class="src"><a id="v:withSameCont" class="def">withSameCont</a> :: [<a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> a] -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> [a] <a href="#v:withSameCont" class="selflink">#</a></p><div class="doc"><p>Execute the given computation with the same continuation.
This means that all expressions will see the same set of used variables.
The resulting expressions uses a variable if any of the computation does.
(e.g., then &quot;then&quot; and &quot;else&quot; branches of if-then-else) </p></div></div><div class="top"><p class="src"><a id="v:getUsed" class="def">getUsed</a> :: <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> (<a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/containers-0.6.7/Data-Set.html#t:Set" title="Data.Set">Set</a> Ident) <a href="#v:getUsed" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:setUsed" class="def">setUsed</a> :: <a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/containers-0.6.7/Data-Set.html#t:Set" title="Data.Set">Set</a> Ident -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> () <a href="#v:setUsed" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:inStreamClosure" class="def">inStreamClosure</a> :: <a href="Cryptol-Compiler-Rust-Monad.html#t:ExprContext" title="Cryptol.Compiler.Rust.Monad">ExprContext</a> -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> a -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> ([(Ident, <a href="file:///home/diatchki/src/cryptol/compiler/dist-newstyle/build/x86_64-linux/ghc-9.6.2/cryptol-3.0.0.99/doc/html/cryptol/Cryptol-TypeCheck-Type.html#t:TParam" title="Cryptol.TypeCheck.Type">TParam</a>)], [(Ident, <a href="Cryptol-Compiler-IR-Common.html#t:SizeVarSize" title="Cryptol.Compiler.IR.Common">SizeVarSize</a>)], a) <a href="#v:inStreamClosure" class="selflink">#</a></p><div class="doc"><p>Do something without affecting the continuation, and variables
 are only accessed through Self.</p></div></div><div class="top"><p class="src"><a id="v:isInStreamClosure" class="def">isInStreamClosure</a> :: <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> (<a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Cryptol-Compiler-Rust-Monad.html#t:StreamClosureInfo" title="Cryptol.Compiler.Rust.Monad">StreamClosureInfo</a>) <a href="#v:isInStreamClosure" class="selflink">#</a></p><div class="doc"><p>Are we in a strem closure?</p></div></div><div class="top"><p class="src"><a id="v:mapStreamClosure" class="def">mapStreamClosure</a> :: (<a href="Cryptol-Compiler-Rust-Monad.html#t:StreamClosureInfo" title="Cryptol.Compiler.Rust.Monad">StreamClosureInfo</a> -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:StreamClosureInfo" title="Cryptol.Compiler.Rust.Monad">StreamClosureInfo</a>) -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> <a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:mapStreamClosure" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:bindFun" class="def">bindFun</a> :: <a href="Cryptol-Compiler-IR-Cryptol.html#t:FunName" title="Cryptol.Compiler.IR.Cryptol">FunName</a> -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> Ident <a href="#v:bindFun" class="selflink">#</a></p><div class="doc"><p>Bind a function in this module</p></div></div><div class="top"><p class="src"><a id="v:getTParams" class="def">getTParams</a> :: <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> (<a href="file:///home/diatchki/src/cryptol/compiler/dist-newstyle/build/x86_64-linux/ghc-9.6.2/cryptol-3.0.0.99/doc/html/cryptol/Cryptol-TypeCheck-Type.html#t:TParam" title="Cryptol.TypeCheck.Type">TParam</a> -&gt; <a href="Cryptol-Compiler-Rust-Utils.html#t:RustType" title="Cryptol.Compiler.Rust.Utils">RustType</a>) <a href="#v:getTParams" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:lookupTParam" class="def">lookupTParam</a> :: <a href="file:///home/diatchki/src/cryptol/compiler/dist-newstyle/build/x86_64-linux/ghc-9.6.2/cryptol-3.0.0.99/doc/html/cryptol/Cryptol-TypeCheck-Type.html#t:TParam" title="Cryptol.TypeCheck.Type">TParam</a> -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> Ident <a href="#v:lookupTParam" class="selflink">#</a></p><div class="doc"><p>Get the identifiier corresponding to a type parameter.</p></div></div><div class="top"><p class="src"><a id="v:lookupSizeParam" class="def">lookupSizeParam</a> :: <a href="Cryptol-Compiler-IR-Cryptol.html#t:SizeName" title="Cryptol.Compiler.IR.Cryptol">SizeName</a> -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> <a href="Cryptol-Compiler-Rust-Utils.html#t:RustExpr" title="Cryptol.Compiler.Rust.Utils">RustExpr</a> <a href="#v:lookupSizeParam" class="selflink">#</a></p><div class="doc"><p>Get the expresssion for a size parameter.</p></div></div><div class="top"><p class="src"><a id="v:lookupNameId" class="def">lookupNameId</a> :: <a href="Cryptol-Compiler-IR-Cryptol.html#t:NameId" title="Cryptol.Compiler.IR.Cryptol">NameId</a> -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> (<a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>, <a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>, <a href="Cryptol-Compiler-Rust-Utils.html#t:RustExpr" title="Cryptol.Compiler.Rust.Utils">RustExpr</a>) <a href="#v:lookupNameId" class="selflink">#</a></p><div class="doc"><p>Get the identfier for a name.
 Returns (isThisLocal?, isThisLastUse?,Expr)
 isThisLocal is True if this is `let` bound local variable
 isThisLastUse is True if the variable is not mentioned in the continuation.</p></div></div><div class="top"><p class="src"><a id="v:lookupNameRustIdent" class="def">lookupNameRustIdent</a> :: <a href="Cryptol-Compiler-IR-Cryptol.html#t:NameId" title="Cryptol.Compiler.IR.Cryptol">NameId</a> -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> Ident <a href="#v:lookupNameRustIdent" class="selflink">#</a></p><div class="doc"><p>Get the identifier for to use for the given local names</p></div></div><div class="top"><p class="src"><a id="v:lookupLenParam" class="def">lookupLenParam</a> :: <a href="file:///home/diatchki/src/cryptol/compiler/dist-newstyle/build/x86_64-linux/ghc-9.6.2/cryptol-3.0.0.99/doc/html/cryptol/Cryptol-TypeCheck-Type.html#t:TParam" title="Cryptol.TypeCheck.Type">TParam</a> -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> <a href="Cryptol-Compiler-Rust-Utils.html#t:RustExpr" title="Cryptol.Compiler.Rust.Utils">RustExpr</a> <a href="#v:lookupLenParam" class="selflink">#</a></p><div class="doc"><p>Get the expression for a length parametes associated with the given
 type parameter.</p></div></div><div class="top"><p class="src"><a id="v:isFunNameLocal" class="def">isFunNameLocal</a> :: <a href="Cryptol-Compiler-IR-Cryptol.html#t:FunName" title="Cryptol.Compiler.IR.Cryptol">FunName</a> -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> <a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:isFunNameLocal" class="selflink">#</a></p><div class="doc"><p>Is this name in the module that we are currently compiling.</p></div></div><div class="top"><p class="src"><a id="v:lookupFunName" class="def">lookupFunName</a> :: <a href="Cryptol-Compiler-IR-Cryptol.html#t:FunName" title="Cryptol.Compiler.IR.Cryptol">FunName</a> -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> (<a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="Cryptol-Compiler-IR-Prims.html#t:IRPrim" title="Cryptol.Compiler.IR.Prims">IRPrim</a> <a href="Cryptol-Compiler-Rust-Utils.html#t:RustPath" title="Cryptol.Compiler.Rust.Utils">RustPath</a>) <a href="#v:lookupFunName" class="selflink">#</a></p><div class="doc"><p>Get an expression corresponding to a named function</p></div></div><div class="top"><p class="src"><a id="v:localScope" class="def">localScope</a> :: <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> a -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> a <a href="#v:localScope" class="selflink">#</a></p><div class="doc"><p>Evaluate a computation, forgetting any locally bound variables afterward.</p></div></div><div class="top"><p class="src"><a id="v:getFunNames" class="def">getFunNames</a> :: <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> (<a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/containers-0.6.7/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> <a href="Cryptol-Compiler-IR-Cryptol.html#t:FunName" title="Cryptol.Compiler.IR.Cryptol">FunName</a> Ident) <a href="#v:getFunNames" class="selflink">#</a></p><div class="doc"><p>Get the ampping between IR names and Rust names for this module.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:LocalNames" class="def">LocalNames</a> <a href="#t:LocalNames" class="selflink">#</a></p><div class="doc"><p>Names local to a declaration</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:LocalNames" class="def">LocalNames</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:lTypeNames" class="def">lTypeNames</a> :: <a href="Cryptol-Compiler-Rust-NameMap.html#t:NameMap" title="Cryptol.Compiler.Rust.NameMap">NameMap</a> <a href="file:///home/diatchki/src/cryptol/compiler/dist-newstyle/build/x86_64-linux/ghc-9.6.2/cryptol-3.0.0.99/doc/html/cryptol/Cryptol-TypeCheck-Type.html#t:TParam" title="Cryptol.TypeCheck.Type">TParam</a></dfn><div class="doc"><p>Names for type params</p></div></li><li><dfn class="src"><a id="v:lTypeBounds" class="def">lTypeBounds</a> :: <a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/containers-0.6.7/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> <a href="file:///home/diatchki/src/cryptol/compiler/dist-newstyle/build/x86_64-linux/ghc-9.6.2/cryptol-3.0.0.99/doc/html/cryptol/Cryptol-TypeCheck-Type.html#t:TParam" title="Cryptol.TypeCheck.Type">TParam</a> [<a href="Cryptol-Compiler-Rust-Utils.html#t:RustWherePredicate" title="Cryptol.Compiler.Rust.Utils">RustWherePredicate</a>]</dfn><div class="doc"><p>Bounds on type parameters we have.  We keep this around,
 so that if we need to make a stream closure, we can copy them
 in the struct declaration.</p></div></li><li><dfn class="src"><a id="v:lValNames" class="def">lValNames</a> :: <a href="Cryptol-Compiler-Rust-NameMap.html#t:NameMap" title="Cryptol.Compiler.Rust.NameMap">NameMap</a> <a href="Cryptol-Compiler-IR-Cryptol.html#t:NameId" title="Cryptol.Compiler.IR.Cryptol">NameId</a></dfn><div class="doc"><p>Names for local values</p></div></li><li><dfn class="src"><a id="v:lLenParams" class="def">lLenParams</a> :: <a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/containers-0.6.7/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> <a href="file:///home/diatchki/src/cryptol/compiler/dist-newstyle/build/x86_64-linux/ghc-9.6.2/cryptol-3.0.0.99/doc/html/cryptol/Cryptol-TypeCheck-Type.html#t:TParam" title="Cryptol.TypeCheck.Type">TParam</a> Ident</dfn><div class="doc"><p>Names for Length params.  When generating these we use the &quot;used&quot;
 set of <code><a href="Cryptol-Compiler-Rust-Monad.html#v:lValNames" title="Cryptol.Compiler.Rust.Monad">lValNames</a></code>, because they are values.</p></div></li><li><dfn class="src"><a id="v:lSizeParams" class="def">lSizeParams</a> :: <a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/containers-0.6.7/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> <a href="file:///home/diatchki/src/cryptol/compiler/dist-newstyle/build/x86_64-linux/ghc-9.6.2/cryptol-3.0.0.99/doc/html/cryptol/Cryptol-TypeCheck-Type.html#t:TParam" title="Cryptol.TypeCheck.Type">TParam</a> Ident</dfn><div class="doc"><p>Names for size parameters.  When generating these we use the &quot;used&quot;
 set of <code><a href="Cryptol-Compiler-Rust-Monad.html#v:lValNames" title="Cryptol.Compiler.Rust.Monad">lValNames</a></code>, because they are values.</p></div></li><li><dfn class="src"><a id="v:lLocalVars" class="def">lLocalVars</a> :: <a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/containers-0.6.7/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> Ident <a href="Cryptol-Compiler-Rust-Monad.html#t:LocVarLocation" title="Cryptol.Compiler.Rust.Monad">LocVarLocation</a></dfn><div class="doc"><p>Names of local variable (i.e., not arguments)</p></div></li><li><dfn class="src"><a id="v:lUsedVars" class="def">lUsedVars</a> :: <a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/containers-0.6.7/Data-Set.html#t:Set" title="Data.Set">Set</a> Ident</dfn><div class="doc"><p>Variables used by the current continuation.
       We generate code &quot;backwards&quot; (continuation first),
       and this field tells us which variables were mentioned in the
       continuation. </p></div></li><li><dfn class="src"><a id="v:lInStreamClosure" class="def">lInStreamClosure</a> :: !(<a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Cryptol-Compiler-Rust-Monad.html#t:StreamClosureInfo" title="Cryptol.Compiler.Rust.Monad">StreamClosureInfo</a>)</dfn><div class="doc"><p>If this is <code><a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/Data-Maybe.html#v:Just" title="Data.Maybe">Just</a></code>, then we are compiling a stream.
  * Then we should access local variables through self.
  * The ExprContext indicates how variables are stored in the closure
    (i.e., are they borrowed or owned by the closure).</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:StreamClosureInfo" class="def">StreamClosureInfo</a> <a href="#t:StreamClosureInfo" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:StreamClosureInfo" class="def">StreamClosureInfo</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:cloLenIdents" class="def">cloLenIdents</a> :: <a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/containers-0.6.7/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> Ident <a href="file:///home/diatchki/src/cryptol/compiler/dist-newstyle/build/x86_64-linux/ghc-9.6.2/cryptol-3.0.0.99/doc/html/cryptol/Cryptol-TypeCheck-Type.html#t:TParam" title="Cryptol.TypeCheck.Type">TParam</a></dfn><div class="doc"><p>Lenght variables that need to be stored in the closure</p></div></li><li><dfn class="src"><a id="v:cloSizeIdents" class="def">cloSizeIdents</a> :: <a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/containers-0.6.7/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> Ident <a href="Cryptol-Compiler-IR-Common.html#t:SizeVarSize" title="Cryptol.Compiler.IR.Common">SizeVarSize</a></dfn><div class="doc"><p>Size variables that need to be stored in the closure</p></div></li><li><dfn class="src"><a id="v:cloContext" class="def">cloContext</a> :: <a href="Cryptol-Compiler-Rust-Monad.html#t:ExprContext" title="Cryptol.Compiler.Rust.Monad">ExprContext</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:LocVarLocation" class="def">LocVarLocation</a> <a href="#t:LocVarLocation" class="selflink">#</a></p><div class="doc"><p>How to access a local variable</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:KnownLocal" class="def">KnownLocal</a></td><td class="doc"><p>Always access as a local variable</p></td></tr><tr><td class="src"><a id="v:LocalOrClosure" class="def">LocalOrClosure</a></td><td class="doc"><p>Acces through closure, if in a closure context.</p></td></tr></table></div></div><div class="top"><p class="src"><a id="v:emptyLocalNames" class="def">emptyLocalNames</a> :: <a href="Cryptol-Compiler-Rust-Monad.html#t:LocalNames" title="Cryptol.Compiler.Rust.Monad">LocalNames</a> <a href="#v:emptyLocalNames" class="selflink">#</a></p><div class="doc"><p>Empty local names, useful when starting a new declaration.</p></div></div><div class="top"><p class="src"><a id="v:addLocalType" class="def">addLocalType</a> :: <a href="file:///home/diatchki/src/cryptol/compiler/dist-newstyle/build/x86_64-linux/ghc-9.6.2/cryptol-3.0.0.99/doc/html/cryptol/Cryptol-TypeCheck-Type.html#t:TParam" title="Cryptol.TypeCheck.Type">TParam</a> -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:LocalNames" title="Cryptol.Compiler.Rust.Monad">LocalNames</a> -&gt; (Ident, <a href="Cryptol-Compiler-Rust-Monad.html#t:LocalNames" title="Cryptol.Compiler.Rust.Monad">LocalNames</a>) <a href="#v:addLocalType" class="selflink">#</a></p><div class="doc"><p>Bind a type parameter.</p></div></div><div class="top"><p class="src"><a id="v:addLocalVar" class="def">addLocalVar</a> :: <a href="${pkgroot}/../../../share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Cryptol-Compiler-Rust-Monad.html#t:LocVarLocation" title="Cryptol.Compiler.Rust.Monad">LocVarLocation</a> -&gt; <a href="Cryptol-Compiler-IR-Cryptol.html#t:NameId" title="Cryptol.Compiler.IR.Cryptol">NameId</a> -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:LocalNames" title="Cryptol.Compiler.Rust.Monad">LocalNames</a> -&gt; (Ident, <a href="Cryptol-Compiler-Rust-Monad.html#t:LocalNames" title="Cryptol.Compiler.Rust.Monad">LocalNames</a>) <a href="#v:addLocalVar" class="selflink">#</a></p><div class="doc"><p>Bind a local variable/paramter.</p></div></div><div class="top"><p class="src"><a id="v:removeLocalVar" class="def">removeLocalVar</a> :: <a href="Cryptol-Compiler-IR-Cryptol.html#t:NameId" title="Cryptol.Compiler.IR.Cryptol">NameId</a> -&gt; Ident -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:LocalNames" title="Cryptol.Compiler.Rust.Monad">LocalNames</a> -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:LocalNames" title="Cryptol.Compiler.Rust.Monad">LocalNames</a> <a href="#v:removeLocalVar" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:addLocalLenghtParam" class="def">addLocalLenghtParam</a> :: <a href="file:///home/diatchki/src/cryptol/compiler/dist-newstyle/build/x86_64-linux/ghc-9.6.2/cryptol-3.0.0.99/doc/html/cryptol/Cryptol-TypeCheck-Type.html#t:TParam" title="Cryptol.TypeCheck.Type">TParam</a> -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:LocalNames" title="Cryptol.Compiler.Rust.Monad">LocalNames</a> -&gt; (Ident, <a href="Cryptol-Compiler-Rust-Monad.html#t:LocalNames" title="Cryptol.Compiler.Rust.Monad">LocalNames</a>) <a href="#v:addLocalLenghtParam" class="selflink">#</a></p><div class="doc"><p>Bind a local parameter used for the Length trait.</p></div></div><div class="top"><p class="src"><a id="v:addLocalSizeParam" class="def">addLocalSizeParam</a> :: <a href="file:///home/diatchki/src/cryptol/compiler/dist-newstyle/build/x86_64-linux/ghc-9.6.2/cryptol-3.0.0.99/doc/html/cryptol/Cryptol-TypeCheck-Type.html#t:TParam" title="Cryptol.TypeCheck.Type">TParam</a> -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:LocalNames" title="Cryptol.Compiler.Rust.Monad">LocalNames</a> -&gt; (Ident, <a href="Cryptol-Compiler-Rust-Monad.html#t:LocalNames" title="Cryptol.Compiler.Rust.Monad">LocalNames</a>) <a href="#v:addLocalSizeParam" class="selflink">#</a></p><div class="doc"><p>Bind a local parameter used for the Length trait.</p></div></div><div class="top"><p class="src"><a id="v:enter" class="def">enter</a> :: <a href="Cryptol-Compiler-PP.html#t:Doc" title="Cryptol.Compiler.PP">Doc</a> -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> a -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> a <a href="#v:enter" class="selflink">#</a></p><div class="doc"><p>Enter a named scope (e.g., a delcaration)</p></div></div><div class="top"><p class="src"><a id="v:unsupported" class="def">unsupported</a> :: <a href="Cryptol-Compiler-PP.html#t:Doc" title="Cryptol.Compiler.PP">Doc</a> -&gt; <a href="Cryptol-Compiler-Rust-Monad.html#t:Rust" title="Cryptol.Compiler.Rust.Monad">Rust</a> a <a href="#v:unsupported" class="selflink">#</a></p><div class="doc"><p>Raise an error, that something is not yet supported</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.28.0</p></div></body></html>